const createIntegration = require('@segment/analytics.js-integration');

const BeforeSendIntegration = createIntegration('BeforeSend');
Object.assign(BeforeSendIntegration.prototype, {
  initialize() {
    this.ready();
    this.analytics.on('invoke', msg => {
      if (msg && msg.obj && msg.obj.context && msg.obj.context.page) {
        msg.obj.context.page = undefined;
        this.ready();
      }
    });
  },

  loaded() {
    return true;
  }

});
export default BeforeSendIntegration;